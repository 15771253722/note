# 一.框架：Spring框架

## 1.Spring框架—控制反转/依赖注入（IOC/DI）

- - 1 Spring框架概述
    - - 什么是Spring?

        Spring是一个开源框架，它是为了解决企业应用开发的复杂性而创建的。Spring使用基本的JavaBean来完成以前只可能由EJB完成的事情。然而Spring的用途不仅限于服务器端的开发。从简单性、可测试性和松耦合的角度而言，任何java应用都可以从Spring中收益。

        目的：解决企业应用开发的复杂性。

        功能：使用基本的JavaBean代替EJB，并提供了更多的企业应用功能。

        范围：任何java应用

        它是一个容器框架，用来装JavaBean（java对象），中间层框架（万能胶）可以起一个连接作用，比如说把Struts和hibernate粘合在一起。简单来说，spring是一个轻量级的控制反转（ioc）和面向切面（aop）的容器框架。

      - 用白话来讲，就是由容器控制程序之间的（依赖）关系，而非传统实现中，由程序代码直接操控。这也就是所谓“控制反转”的概念所在：(依赖)控制权由应用代码中转到了外部容器，控制权的转移，是所谓反转。

## 2.Spring框架—面向切面编程（AOP）

- - 1.什么是AOP？

    ​      AOP（Aspect-OrientedProgramming，面向切面编程），可以说是OOP（Object-Oriented Programing，面向对象编程）的补充和完善。OOP引入封装、继承和多态性等概念来建立一种对象层次结构，用以模拟公共行为的一个集合。当我们需要为分散的对象引入公共行为的时候，OOP则显得无能为力。也就是说，OOP允许你定义从上到下的关系，但并不适合定义从左到右的关系。例如日志功能。日志代码往往水平地散布在所有对象层次中，而与它所散布到的对象的核心功能毫无关系。对于其他类型的代码，如安全性、异常处理和透明的持续性也是如此。这种散布在各处的无关的代码被称为横切（cross-cutting）代码，在OOP设计中，它导致了大量代码的重复，而不利于各个模块的重用。

    ​       而AOP技术则恰恰相反，它利用一种称为“横切”的技术，剖解开封装的对象内部，并将那些影响了多个类的公共行为封装到一个可重用模块，并将其名为“Aspect”，即方面。所谓“方面”，简单地说，就是将那些与业务无关，却为业务模块所共同调用的逻辑或责任封装起来，便于减少系统的重复代码，降低模块间的耦合度，并有利于未来的可操作性和可维护性。AOP代表的是一个横向的关系，如果说“对象”是一个空心的圆柱体，其中封装的是对象的属性和行为；那么面向方面编程的方法，就仿佛一把利刃，将这些空心圆柱体剖开，以获得其内部的消息。而剖开的切面，也就是所谓的“方面”了。然后它又以巧夺天功的妙手将这些剖开的切面复原，不留痕迹。

  - 2.AOP实现原理

     Spring中的AOP代理还是离不开Spring的IOC容器，代理的生成，管理及其依赖关系都是由IOC容器负责，Spring默认使用JDK动态代理，在需要代理类而不是代理接口的时候，Spring会自动切换为使用CGLIB代理，不过现在的项目都是面向接口编程，所以JDK动态代理相对来说用的还是多一些。

  - 3.AOP术语

    - (1)Aspect(切面):通常是一个类，里面可以定义切入点和通知
    - (2)JointPoint(连接点):程序执行过程中明确的点，一般是方法的调用
    - (3)Advice(通知):AOP在特定的切入点上执行的增强处理，有before,after,afterReturning,afterThrowing,around
    - (4)Pointcut(切入点):就是带有通知的连接点，在程序中主要体现为书写切入点表达式
    - (5)AOP代理：AOP框架创建的对象，代理就是目标对象的加强。Spring中的AOP代理可以使JDK动态代理，也可以是CGLIB代理，前者基于接口，后者基于子类
      - 前置通知:在我们执行目标方法之前运行(**@Before**)
      - 后置通知:在我们目标方法运行结束之后 ,不管有没有异常**(@After)**
      - 返回通知:在我们的目标方法正常返回值后运行**(@AfterReturning)**
      - 异常通知:在我们的目标方法出现异常后运行**(@AfterThrowing)**
      - 环绕通知:动态代理, 需要手动执行joinPoint.procced()(其实就是执行我们的目标方法执行之前相当于前置通知, 执行之后就相当于我们后置通知**(@Around)**

    ​

